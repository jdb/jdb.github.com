<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Partitioning a disk &mdash; bits v0.5 documentation</title>
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.5',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="bits v0.5 documentation" href="index.html" />
    <link rel="next" title="Kernel" href="noyau.html" />
    <link rel="prev" title="rsync" href="rsync.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="noyau.html" title="Kernel"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="rsync.html" title="rsync"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">bits v0.5 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="partitioning-a-disk">
<h1>Partitioning a disk<a class="headerlink" href="#partitioning-a-disk" title="Permalink to this headline">¶</a></h1>
<p>Partition may serve several purpose depending on the use of the
machine.</p>
<div class="section" id="laptop-with-windows-and-linux">
<h2>laptop with windows and linux<a class="headerlink" href="#laptop-with-windows-and-linux" title="Permalink to this headline">¶</a></h2>
<p>You usually get windows installed on a partition spanning on the
entire hard drive. The next step is to install your prefered Linux
distro. During the partition step :</p>
<ol class="arabic simple">
<li>shrink the windows partition ie hda1 to 10 Go (installation CD for
mandrake and ubuntu).</li>
<li>Then, make an 10 Go ext3 root partition for the linux (hda2).</li>
<li>Make a swap partition (hda3, 1 or 2 Go should be enough).</li>
<li>Make a vfat partition with the rest (hda4). The vfat partition will
contain most of your personal data, documents, etc and will be
read/writable by both OS.</li>
</ol>
<p>Note:</p>
<ul>
<li><p class="first">When the Unix is set up, you can mount the vfat partition in
/mount/echange. Make it read/write for you user through the
/etc/fstab:</p>
<div class="highlight-python"><pre>grep vfat /etc/fstab
/dev/hdb    /mnt/echange    vfat uid=jd,gid=jd    0    0</pre>
</div>
<p>Make symbolic links in your home toward the main directories of this
mount so that data is available quite transparently</p>
<div class="highlight-python"><pre>cd &amp;&amp; ln -s /mnt/echange/muzak
cd &amp;&amp; ln -s /mnt/echange/photos</pre>
</div>
</li>
<li><p class="first">Configure windows so that the &#8216;My Documents&#8217; folder be on this
fourth partition.</p>
</li>
<li><p class="first">It can be convenient to configure your firefox and thunderbird
profiles on windows and linux to point to the same directory on the
vfat partition. Then you may access the same mails, bookmarks,
saved password from your Unix or your windows. Be real sure to use
same versions for firefox under linux and windows (same for
thunderbird).</p>
</li>
<li><p class="first">Due to vfat&#8217;s limitations, you can&#8217;t trust the permission and
owners on the partition&#8217;s files (you can assign temporary ones in
/etc/fstab)</p>
</li>
</ul>
</div>
<div class="section" id="server-secured-though-partitions">
<h2>Server secured though partitions<a class="headerlink" href="#server-secured-though-partitions" title="Permalink to this headline">¶</a></h2>
<p>Partitions are a part of making a robust server.</p>
<p>Say your web site go wild and write GB and GB into /var. If /var is on
the root partitions, then the root partition will eventually get
full. The system, which needs some empty hard drive space on the root
partition will function poorly. If /var and / are on separate
partitions, the web site will fill its partitions without much
affecting the system. Other examples: users can fill their home
directory with downloads, loaded server may fill /var/log.</p>
<p>lvm is cool because you can adjust/adapt the size of the logical
volumes without affecting existing data on the partitions (&#8220;hot
resize&#8221;).</p>
<ol class="arabic simple">
<li>Physically : 2 40 GB hd, sda et sdb sont chacun partitionnés en 2,
100 Mo et 40Go (in the BIOS)</li>
<li>Raid 1 : containers #1: 2 100 MB partitions, containers #2: 2 40 GB
partitions (in the BIOS)</li>
<li>LVM - physical volum : container #2 Raid de 40 GB</li>
<li>LVM - volume group : contains the 40 GB pv</li>
<li>LVM - volume logique : root (5 Go), home (10 Go), var (5 Go), log(5
Go)</li>
<li>Filesystem : /boot sur la partition Raid de 100 Mo, / sur root,
/home sur home, /var sur var et /var/log sur log</li>
</ol>
<p>It is mandatory two create two real partitions, among them, one is not
on LVM and it contains /boot. The reason comes from Grub which does
not yet read LVM partitions, hence, grub will not be able to read the
kernel to boot.</p>
</div>
<div class="section" id="my-desktop-pc">
<h2>My desktop PC<a class="headerlink" href="#my-desktop-pc" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">free real partitions for testing new OS</p>
</li>
<li><p class="first">several OS and LANs with Xen on the main Debian</p>
</li>
<li><p class="first">tons of pictures, muzak spanning extra hd</p>
</li>
<li><p class="first">small partitions on every extra hd on which I duplicate old archives</p>
</li>
<li><p class="first">hda: system hard drive</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="33%" />
<col width="21%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><p class="first last">partition</p>
</th>
<th class="head"><p class="first last">mount point</p>
</th>
<th class="head"><p class="first last">fs type</p>
</th>
<th class="head"><p class="first last">size</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><p class="first last">hda1</p>
</td>
<td><p class="first last">/boot</p>
</td>
<td><p class="first last">ext3</p>
</td>
<td><p class="first last">500M</p>
</td>
</tr>
<tr><td><p class="first last">hda2</p>
</td>
<td><p class="first last">edgy</p>
</td>
<td><p class="first last">ext3</p>
</td>
<td><p class="first last">10 Go</p>
</td>
</tr>
<tr><td><p class="first last">hda3</p>
</td>
<td><p class="first last">bsd</p>
</td>
<td><p class="first last">bsd</p>
</td>
<td><p class="first last">10 Go</p>
</td>
</tr>
<tr><td><p class="first last">hda4</p>
</td>
<td><p class="first last">vg:sys</p>
</td>
<td><p class="first last">lvm</p>
</td>
<td><p class="first last">61 Go</p>
</td>
</tr>
</tbody>
</table>
<p>hda4: pvs dans vg sys: lvm debian, home, xen itchy, xen scratchy</p>
</li>
<li><p class="first">hdx: small backup + data</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="36%" />
<col width="21%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head"><p class="first last">partition</p>
</th>
<th class="head"><p class="first last">mount point</p>
</th>
<th class="head"><p class="first last">fs type</p>
</th>
<th class="head"><p class="first last">size</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><p class="first last">hdx1</p>
</td>
<td><p class="first last">backup</p>
</td>
<td><p class="first last">ext3</p>
</td>
<td><p class="first last">10Go</p>
</td>
</tr>
<tr><td><p class="first last">hdx2</p>
</td>
<td><p class="first last">vg:fnac</p>
</td>
<td><p class="first last">lvm</p>
</td>
<td><p class="first last">*</p>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
<div class="section" id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>vfat is read/writable by Linux and Windows, vfat does not allow file
permissions (hence multi-user filesystem), nor links.</li>
<li>ntfs is not writable by Linux (Linux reads tons of cool filesystems,
but ntfs is undocumented). The captive library may help you, it is a
wrapper around the windows ntfs driver.</li>
<li>if you have a windows, then you may need a vfat partition so that
you can share data (or use a usb drive).</li>
<li>grub cannot read a &#8220;lvm formatted&#8221; /boot (hence cannot boot on it),
keep a separate partition for /boot.</li>
<li>an lvm / cannot be read by a pristine linux kernel when it boots
because it hasn&#8217;t loaded yet the lvm stuff (Debian has patched the
initrd, though it is not really a problem)</li>
<li>either you can make a backup partition in pure ext3 (no lvm) so that
it if you take the hard drive off, you simply need a Live CD to read
the data, or you can mirror partitions with evms on several disks.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">Partitioning a disk</a><ul>
<li><a class="reference external" href="#laptop-with-windows-and-linux">laptop with windows and linux</a></li>
<li><a class="reference external" href="#server-secured-though-partitions">Server secured though partitions</a></li>
<li><a class="reference external" href="#my-desktop-pc">My desktop PC</a></li>
<li><a class="reference external" href="#notes">Notes</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="rsync.html"
                                  title="previous chapter">rsync</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="noyau.html"
                                  title="next chapter">Kernel</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="sources/partition.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="noyau.html" title="Kernel"
             >next</a> |</li>
        <li class="right" >
          <a href="rsync.html" title="rsync"
             >previous</a> |</li>
        <li><a href="index.html">bits v0.5 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, jdb.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </body>
</html>