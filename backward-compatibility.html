<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Backward compatibility &mdash; fiches v0.3 documentation</title>
    <link rel="stylesheet" href=".static/default.css" type="text/css" />
    <link rel="stylesheet" href=".static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.3',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src=".static/jquery.js"></script>
    <script type="text/javascript" src=".static/doctools.js"></script>
    <link rel="top" title="fiches v0.3 documentation" href="index.html" />
    <link rel="next" title="Les pseudo-terminaux" href="pty.html" />
    <link rel="prev" title="kvm" href="kvm.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="pty.html" title="Les pseudo-terminaux"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="kvm.html" title="kvm"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">fiches v0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="backward-compatibility">
<h1>Backward compatibility<a class="headerlink" href="#backward-compatibility" title="Permalink to this headline">¶</a></h1>
<p>Softwares and specifications must be corrected or evolve to support
new needs. This paragraph addresses the difficulty for protocol or a
library to evolve while making it possible for impacted subsystems to
be updated at a different pace. We identified three steps in a
deprecation process:</p>
<ol class="arabic">
<li><p class="first">before the implementation of the evolution,endpoints are compatible,</p>
</li>
<li><p class="first">a transitory state where one of the endpoint implements the new
feature but also supports the old behavior, and provides the other
endpoint with what it expects. During this phase, communication
about the changes and about the end of support of the old feature
is required.</p>
<p>this is a pretty empty paragraph, some smarter dudes must have
written something more complete. Maybe monkey patching in Plone, or
Erlangs</p>
</li>
<li><p class="first">unsupported where one of the endpoints does not support the old
behavior. This third step may not be required as both solution, th
old and the new can coexist indefinitely for various reason</p>
</li>
</ol>
<p>When the changes concerns clarifications, new figures, fixed typos,
packaging the minor number should be augmented. It is also possible to
specify workarounds for keeping backward compatibility.</p>
<p>Whenever compatibility is broken, there should be a bump in the major
number. Incompatibilities varies they can be at the wire level when
message format is impacted, configuration: when a new binary cannot be
used with an old configuration file, API, when an application expects
some functions or some signatures to be presented.</p>
<div class="section" id="example-1-fragment-duration-is-renamed-duration">
<h2>Example 1: <em>fragment-duration</em> is renamed <em>duration</em><a class="headerlink" href="#example-1-fragment-duration-is-renamed-duration" title="Permalink to this headline">¶</a></h2>
<p>The <em>fragment-duration</em> parameter of the the <em>setup</em> command is a
misnomer and is misleading and should be renamed <em>duration</em>. Client
and servers are distributed independently to give mandatory
flexibility to the integration team. Client (resp. server) version x+1
can handle server (resp. client) version x.</p>
<p><strong>problem</strong>: If the manager is recent and sends the new parameter
<em>duration</em> parameter to an old streaming server, the parameter is
unknown, hence ignored. The duration of the contents are
systematically the default duration whatever the client requests.</p>
<p><strong>Solution 1</strong>: The manager maintains and branches on runtime or
through the configuration on differing implementations of the
protocol. As the protocol version is stated by the streaming server on
login, the manager sends <em>fragment-duration</em> when the streaming server
is implementing the old protocol version. The client sends <em>duration</em>
when connected to a recent streaming server.</p>
<p><strong>Solution 2</strong>: The manager handles the transition period by sending
both <em>fragment-duration</em> and <em>duration</em>, set to the same
value. Because ALLP servers must ignore unknown parameters, old
versions will ignore the old parameter, and new versions will ignore
old parameters. Streaming servers should log unknown parameters. The
<a href="#id1"><span class="problematic" id="id2">*</span></a>manager should log on connect the protocol differences between two
versions of the protocol, for the streaming server information.</p>
<p><strong>Solution 3</strong>: The streaming server handles the transition period and
knows how to interpret both <em>fragment-duration</em> and <em>duration</em>. The
streaming server can answer a &#8220;201 Ok-but-deprecated-element&#8221;.</p>
<p>Whether it is the streaming server of the manager using the old
version of the protocol or using a workaround, the server log should
state that the protocol in deprecated in favor of an more recent
version and the <strong>date</strong> when the server will stop supporting the old
version of the protocol.</p>
<p>The release note of both ends of the protocol must state which version
of the protocol they implement so the integration knows which versions
of client and servers incompatible.</p>
</div>
<div class="section" id="example-2-stream-id-is-unneeded">
<h2>Example 2: <em>stream-id</em> is unneeded<a class="headerlink" href="#example-2-stream-id-is-unneeded" title="Permalink to this headline">¶</a></h2>
<p><em>stream-id</em> is a parameter in the ALLP VODRTP and ALLP VOD2, it is not
part of RTSP, unnecessary to the manager, unknown to the RTP streaming
server and mis-used by the TS streaming server. In the TS streaming
server, the current use of the <em>stream-id</em> is overlapping with the
<em>session</em> in some case and with <em>filename</em> in other case.</p>
<p>The <em>stream-id</em> parameter comes from the VLS streaming server, is
meant to control multiple streams in the same session <a class="footnote-reference" href="#id4" id="id3">[1]</a> but is not
adapted to the TS context where multiple streams would supposedly be
multiplexed at the SPTS level.</p>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[1]</a></td><td><p class="first">Note that the concept of multiple stream is quite powerful:</p>
<ul class="last simple">
<li>a content whose video is streamed in several codecs or resolution,
one multicast address each. This is called adaptative streaming.</li>
<li>a physical conference presentation composed of two video
streams one shows the speaker at the microphone, while the
second video shows its slides.</li>
</ul>
</td></tr>
</tbody>
</table>
<p>Concerning the RTP streaming server, the request from the developer
team is to suppress every mention of <em>stream-id</em> from the
specification since they do not need and support it. Their approach to
multi stream per session uses other parameters: <em>track-id</em> and <em>pt</em>
(for <em>payload type</em>). The <em>stream-id</em> parameter was stripped from the
RTP streaming server specification and the manager team is kept up to
date, via synchrone media, asynchrone media and via the specification
changelog for archive.</p>
<p>Concerning the ALLP TS, the stream-id is an optional parameter of some
requests and an unneeded column of some events. The streaming server
must ignore <em>stream-id</em> in requests (and log deprecation warning) and
must strip the stream-id parameter from the events.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">Backward compatibility</a><ul>
<li><a class="reference external" href="#example-1-fragment-duration-is-renamed-duration">Example 1: <em>fragment-duration</em> is renamed <em>duration</em></a></li>
<li><a class="reference external" href="#example-2-stream-id-is-unneeded">Example 2: <em>stream-id</em> is unneeded</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="kvm.html"
                                  title="previous chapter">kvm</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="pty.html"
                                  title="next chapter">Les pseudo-terminaux</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href=".sources/backward-compatibility.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="pty.html" title="Les pseudo-terminaux"
             >next</a> |</li>
        <li class="right" >
          <a href="kvm.html" title="kvm"
             >previous</a> |</li>
        <li><a href="index.html">fiches v0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, Jean Daniel Browne.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </body>
</html>